version: '2.1'
services:
#  mysql:
#    build: mysql
#    image: bitlum/exchange-mysql
#    container_name: exchange_mysql
#    restart: always
#    volumes:
#      - /tmp/bitlum/exchange/mysql/lib:/var/lib/mysql
#  kafka:
#    build: kafka
#    container_name: exchange_kafka
#    restart: always
#    image: bitlum/exchange-kafka
#    volumes:
#      - /tmp/bitlum/exchange/kafka/logs:/var/log/kafka
  redis1:
    build:
      context: redis
      args:
        PORT: 6381
    image: bitlum/exchange-redis-1
    container_name: exchange_redis_1
    volumes:
      - /tmp/bitlum/exchange/redis/1/lib:/var/lib/redis
  sentinel1:
    build:
      context: sentinel
      args:
        PORT: 26381
        REDIS_HOST: redis1
        REDIS_PORT: 6381
        REDIS_QUORUM: 1
    image: bitlum/exchange-sentinel-1
    container_name: exchange_sentinel_1
    depends_on:
      - redis1
    volumes:
      - /tmp/bitlum/exchange/sentinel/1/log:/var/log/sentinel
